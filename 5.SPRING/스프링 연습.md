### 게시판까지 구현하기

### 1. spring legacy project 생성 및 서버로 테스트하기

### 2. 인코딩 설정 및 테스트하기

* 블로그 참고

### 3. 패키지명  변경

* 패키지명 수정 => controller 패키지
* servlet-context.xml에서 base-package명 수정

### 4. 타일즈 적용 및 테스트하기

* 블로그 참고

### 5. 각종 패키지 생성

* service 패키지
* dao패키지
* vo패키지

### 6. DB 연동

* 블로그 참고
* root-context.xml 파일 설정까지

### 7. DB 연동 테스트

* MemberService 인터페이스 생성

* MemberServiceImp 클래스 생성

  * MemberService 인터페이스를 구현
  * @Service를 추가

* MemberDAO 인터페이스 생성

* MemberMapper.xml에 샘플 코드 추가

  * src/main/resources 폴더에 mappers 폴더를 생성
  * MemberMapper.xml 파일 생성 후 샘플 코드 추가
  * namespace 부분을 현재 프로젝트에 알맞게 수정
  * mapper태그 안에 예제 코드를 삭제

* MemberVO 클래스 생성

  * 테이블 속성과 멤버변수 이름이 같게 생성
  * getter/setter 생성과 toString을 오버라이딩함

* 컨트롤러에 멤버 변수로 MemberService 추가

  * @Autowired 이용

* MemberService에 멤버변수로 MemberDAO 추가

  * @Autowired 이용

* 서버를 재가동하여 에러가 안나는지 테스트

* 컨트롤러/서비스/다오/매퍼에 샘플 코드 추가 및 테스트

  * DB에 샘플 데이터를 추가

  * 컨트롤러 샘플 코드

    * ```java
      @RequestMapping(value= "/")
      public ModelAndView openTilesView(ModelAndView mv) throws Exception{
          mv.setViewName("/main/home");
          //아래 코드는 연동 확인후 지울 코드
          //qwe는 샘플 데이터에 있는 회원아이디
          MemberVO user = memberService.test("qwe");
          System.out.println(user);
          return mv;
      }
      ```

  * 서비스 샘플 코드

    * ```java
      MemberVO test(String id);
      ```

  * 서비스임플 샘플 코드

    * ```java
      @Override
      public MemberVO test(String id) {
          return memberDao.test(id);
      }
      ```

  * 다오 샘플 코드

    * ```java
      MemberVO test(@Param("id")String id);
      ```

  * 매퍼 샘플 코드

    * ```xml
        <select id="test" resultType="kr.green.green.vo.MemberVO">
        	select * from member where me_id = #{id}
        </select>
      ```

  ### 8. 회원가입 기능 구현(비밀번호 암호화 적용)

  * [ github.com/st8324/Docs](http://github.com/st8324/Docs) 참고

  * header.jsp 회원가입 링크 추가
  
  * 컨트롤러에 회원가입 화면을 보여줄수 있는 메소드를 추가
    * /signup에 GET방식
    * 보여줄 화면은 /member/signup.jsp로 설정
    
  * 회원가입 화면파일을 생성. member폴더에 signup.jsp를 생성
    * 회원가입 화면을 구성
    
  * 컨트롤러에 회원가입을 처리하는 메소드를 추가
    * /signup에 POST방식
    * 회원가입이 정상적으로 진행되면 메인페이지(/)로 이동을 시킴
    * 회원가입이 정상적으로 진행되지 않으면 회원가입페이지(/sigup)으로 이동을 시킴
    
  * 컨트롤러에 화면에서 전달한 회원정보를 받아서 확인
    * 매개변수를 추가
    
    * 생일과 관련해서 에러가 발생할 수 있음
    
      * 원인 : 화면에서는 yyyy-mm-dd로 된 문자열을 전송하는데 생일이 Date클래스로 되어 있으면 자동으로 변환이 안됨. String이 Date로 형변환이 안됨.
    
      * 해결방안 : setMe_birth(String date)로 setter를 수정하여 문자열로 된 날짜를 Date로 변환하는 코드를 작성해야 함
    
      * ```java
        public void setMe_birth(String me_birth) {
            SimpleDateFormat format;
            try {
                format = new SimpleDateFormat("yyyy-MM-dd");
                this.me_birth = format.parse(me_birth);
            } catch (ParseException e) {
                e.printStackTrace();
            }
        }
        ```
    
        
    
    * 화면에 input태그/textarea태그/select태그 등에 name을 MemberVO의 매개변수와 일치하게 설정
    
  * 컨트롤러에서 회원정보를 서비스에게 주면서 회원가입하라고 시킴. 
    * 이때 서비스는 회원가입 진행후 가입이 성공했는지 실패했는지 컨트롤러에게 알려줌(리턴타입)
    
  * 서비스에 회원가입 메소드 추가
    * 컨트롤러에서 에러 나는 부분 마우스 호버 create method... 클릭
    
  * 서비스 임플에 회원가입 메소드 추가
    * 서비스임플에서 에러나는 부분 마우스 호버 add unimplemented... 클릭
    
  * 서비스 임플에서 회원가입 기능을 구현
    * 비밀번호 암호화를 함
    * 다오에게 회원가입 정보를 전달하면서 가입하라고 시킴
    
  * 다오에 회원가입 메소드 추가
  
    * 서비스임플에서 에러나는 부분 호버 후 create method... 클릭
    * @Param("이름")을 매개변수 앞에 추가
  
  * 매퍼에 쿼리문 구현
  
    * id에 다오에 추가한 메소드명을 입력
    * 쿼리문 구현
      * 매개변수로 넘어오는 값은 #{}를 이용하고, 넘겨주는 값이 정수나 문자열이 아니면 #{객체명.멤버변수명}으로 호출

### 9. 로그인 기능 구현(Interceptor를 이용한 로그인 유지 적용)

* [로그인 유지 문서 참고 링크](https://github.com/st8324/Docs/blob/master/spring%20framework/Interceptor%EB%A5%BC%20%EC%9D%B4%EC%9A%A9%ED%95%9C%20%EC%9C%A0%EC%A0%80%20%EC%A0%95%EB%B3%B4%20%EC%84%B8%EC%85%98%EC%97%90%20%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0.md)
* 





### 에러가 나는 경우

1. 에러 내용에 다음이 들어간 경우

   * ```java
     Error creating bean with name 'homeController': Unsatisfied dependency expressed through field 'memberService';
     ```

   * 경우1 : MemberServiceImp에 @Service를 빼먹은 경우
   * 경우2 : servlet-context.xml에 base-package를 잘못 설정한 경우

2. 에러 내용에 다음이 들어간 경우

   * ```java
     Error creating bean with name 'memberServiceImp': Unsatisfied dependency expressed through field 'memberDao'
     ```

   * 경우1 : root-context.xml에 mybatis-spring:scan base-package를 잘못 설정한 경우

   * 경우2 : MemberDAO를 클래스로 만든 경우

3. 에러 내용에 다음이 들어간 경우

   * ```java
     Invalid bound statement (not found): kr.green.green.dao.MemberDAO.test
     ```

   * 경우1 : MemberMapper.xml에 namespace에 오타가 있는 경우

   * 경우2 : MemberMapper.xml에 id에 오타가 있는 경우

   * 경우3 : mappers 폴더의 위치가 잘못된 경우

4. 에러 내용에 다음이 들어간 경우

   * ```java
     Could not resolve type alias 'kr.green.green.vo.MemberVO2'.  Cause: java.lang.ClassNotFoundException: Cannot find class: kr.green.green.vo.MemberVO2
     ```

   * 경우 : MemberMapper.xml에 resultType에 오타가 있는 경우

5. xml 파일과 관련된 에러 발생후 올바르게 수정했는데 계속 에러나는 경우

   * 원인 : 수정된 내용이 반영이 제대로 안되서
   * 해결방안 : 프로젝트 선택 후 Alt + F5를 누름

6. 에러 내용에 다음이 들어간 경우

   * ```java
     Could not resolve resource location pattern [classpath:mappers/**/*Mapper.xml]: class path resource [mappers/] cannot be resolved to URL because it does not exist
     ```

   * 경우 : mappers 폴더 위치가 src/main/resources가 아니거나 폴더이름에 오타가 있는 경우

